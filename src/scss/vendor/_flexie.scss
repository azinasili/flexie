// ----------------------------------------------------------------------------
// Flexie grid system
// @author: Azin Asili
//
// Flexie is a modular SCSS flexbox grid system
// Use the predefined row an column mixins
// or customize your own grid system with the helper mixins
//
// 1. Options
// 2. Row helpers
// 3. Column helpers
// 4. Flexie mixins
// ----------------------------------------------------------------------------


// ----------------------------------------------------------------------------
// 1. Options
// ----------------------------------------------------------------------------
$flexie: (
  gutter: 20px,
  columns: 10,
  container-width: 1140px
);


// ----------------------------------------------------------------------------
// 2. Row helpers
// ----------------------------------------------------------------------------

// Flexie row gutter
@mixin flexie-row-gutter($gutter: map-get($flexie, gutter)) {
  @if $gutter == map-get($flexie, gutter) {
    margin-left: map-get($flexie, gutter)/-2;
    margin-right: map-get($flexie, gutter)/-2;
  } @else {
    margin-left: $gutter/-2;
    margin-right: $gutter/-2;
  }
}

// Flexie row direction
@mixin flexie-row-direction($direction: row) {
  @if index('row' 'row-reverse' 'column' 'column-reverse', $direction) {
    flex-direction: $direction;
  }
}

// Flexie row wrap
@mixin flexie-row-wrap($wrap: wrap) {
  @if index('wrap' 'wrap-reverse' 'nowrap', $wrap) {
    flex-wrap: $wrap;
  }
}

// Flexie row justification
@mixin flexie-row-justify($justify: flex-start) {
  $shorthand: (
    right   : flex-end,
    left    : flex-start,
    between : space-between,
    around  : space-around
  );
  @if index('flex-start' 'center' 'flex-end' 'space-between' 'space-around', $justify) {
    justify-content: $justify;
  } @else {
    justify-content: map-get($shorthand, $justify);
  }
}

// Flexie row children align
@mixin flexie-row-align($align: flex-start) {
  $shorthand: (
    top    : flex-start,
    bottom : flex-end,
    middle : center
  );
  @if index('flex-start' 'flex-end' 'center' 'stretch' 'baseline', $align) {
    align-items: $align;
  } @else {
    align-items: map-get($shorthand, $align);
  }
}


// ----------------------------------------------------------------------------
// 3. Column helpers
// ----------------------------------------------------------------------------

// Flexie column width
@mixin flexie-col-width($width: auto) {
  @if $width != auto {
    flex-grow: 0;
    flex-basis: percentage($width);
    width: percentage($width);
  } @else {
    flex-basis: 0;
    flex-grow: 1;
    width: 100%;
  }
}

// Flexie coloumn align
@mixin flexie-col-align($align: flex-start) {
  $shorthand: (
    top    : flex-start,
    bottom : flex-end,
    middle : center
  );
  @if index('flex-start' 'center' 'flex-end' 'stretch', $align) {
    align-self: $align;
  } @else {
    align-self: map-get($shorthand, $align);
  }
}

// Flexie column ordering
@mixin flexie-col-order($order: '') {
  @if $order != '' and unitless($order) == true and round($order) == $order {
    order: $order;
  }
}

// Flexie column gutter width
@mixin flexie-col-gutter($gutter) {
  @if $gutter > 0 {
    padding-left: $gutter/2;
    padding-right: $gutter/2;
  }
}


// ----------------------------------------------------------------------------
// 4. Flexie mixins
// ----------------------------------------------------------------------------

// Container mixin
@mixin flexie-container($width: map-get($flexie, container-width), $gutter: map-get($flexie, gutter)) {
  @include flexie-col-gutter($gutter);
  @if $width == map-get($flexie, container-width) {
    max-width: map-get($flexie, container-width);
  } @else {
    max-width: $width;
  }
  @if $width != 100% {
    margin-left: auto;
    margin-right: auto;
  }
  width: 100%;
}

// Row mixin
@mixin flexie-row($direction: row, $wrap: wrap, $gutter: map-get($flexie, gutter), $justify: '', $align: '') {
  @include flexie-row-direction($direction);
  @include flexie-row-wrap($wrap);
  @include flexie-row-gutter($gutter);
  @include flexie-row-justify($justify);
  @include flexie-row-align($align);
  display: flex;
}

// Column mixin
@mixin flexie-col($width: auto, $gutter: map-get($flexie, gutter), $align: '', $order: '', $column: column) {
  @include flexie-col-width($width);
  @include flexie-col-align($align);
  @include flexie-col-order($order);
  @include flexie-col-gutter($gutter);
  @if index('column' 'column-reverse', $column) {
    flex-direction: $column;
  }
  display: flex;
  flex-shrink: 0;
}
